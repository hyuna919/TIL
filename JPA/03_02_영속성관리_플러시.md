[[JPA]]
### 플러시란?
- 영속성 컨텍스트의 변경 내용을 데이터베이스에 반영
- 파일처리처럼 플러시한다고 해서 1차캐시를 비워버리는 게 아니다

### 플러시 발생
- 트랜잭션 발생시 자동 발생
- 변경 감지
- 수정된 엔티티 쓰기 지연 SQL 저장소에 등록
- 쓰기지연 SQL 저장소의 쿼리를 데이터베이스에 전송(등록,수정,삭제)

### 플러시 방법
|방식|시점|
|----|---|
|직접호출|em.flush()|
|자동호출|트랜잭션 커밋|
||JPQL 쿼리실행|

### 플러시 모드 옵션
쓸 일 많이 없다. 알아만 두자
```java
// 기본값 : 커밋이나 쿼리 실행 시 자동 플러시
em.setFlushMode(FlushModeType.AUTO)

// 커밋할 떄만 플러시
em.setFlushMode(FlushModeType.COMMIT)
```


### 다시 한번 주의
- 영속성 컨텍스트를 비우지 않는다
- 영속성 컨텍스트의 변경 내용을 DB에 동기화
- 트랜잭션이라는 작업 단위가 중요 -> 커밋 직전에만 동기화하면 된다.